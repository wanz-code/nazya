<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Diary Zyaaa</title>
  <style>
    :root{
      --pink:#ff4da6;
      --pink-200:#ffd0e4;
      --bg:#ffe6f0;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      background:var(--bg);
      color:#333;
    }

    /* Header */
    header{
      background:var(--pink);
      color:#fff;
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    header h1{
      margin:0;
      font-size:22px;
      font-weight:700;
      text-align:center;
      flex:1;
    }
    .menu-btn{
      position:absolute;
      left:12px;
      font-size:26px;
      line-height:1;
      background:none;
      border:none;
      color:#fff;
      cursor:pointer;
    }

    /* Sidebar (fixed width, slide with transform to avoid image folding) */
    .sidebar{
      position:fixed;
      top:0; left:0;
      height:100dvh;
      width:320px;
      background:linear-gradient(180deg,#fff 0%, #ffeefa 100%);
      box-shadow:2px 0 16px rgba(0,0,0,.15);
      transform:translateX(-102%);
      transition:transform .35s cubic-bezier(.4,0,.2,1);
      will-change:transform;
      z-index:1001;
      display:flex;
      flex-direction:column;
    }
    .sidebar.open{ transform:translateX(0); }

    .sidebar-content{ padding:16px 18px; overflow:auto; }

    /* Profile row (image + name side-by-side) */
    .profile{
      display:flex;
      align-items:center;
      gap:14px;
      padding-bottom:14px;
      border-bottom:1px solid var(--pink-200);
    }
    .profile img{
      width:72px; height:72px;
      flex:0 0 72px;               /* prevent shrinking (fix fold bug) */
      border-radius:50%;
      object-fit:cover;
      border:2px solid var(--pink);
    }
    .profile-info h2{
      margin:0;
      font-size:16px;
      color:var(--pink);
      white-space:nowrap;           /* satu baris */
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:190px;              /* jaga tetap satu baris */
    }
    .profile-info p{
      margin:.25rem 0 0;
      font-size:13px; color:#777;
    }

    /* Menu items (klik biasa, bukan button, tapi ada feel & hover) */
    nav{
      margin-top:10px;
      display:grid; gap:6px;
    }
    .menu-link{
      display:block;
      padding:10px 4px;
      text-decoration:none;
      color:#333;
      border-bottom:1px dashed #e9a9c8;
      transition:color .2s, transform .2s;
      user-select:none;
    }
    .menu-link:hover{ color:var(--pink); transform:translateX(4px); }

    /* Developer collapse (slide down) */
    .collapse{
      overflow:hidden;
      max-height:0;
      padding:0 6px;
      background:#fff6fb;
      border-left:3px solid var(--pink);
      border-radius:6px;
      transition:max-height .35s ease, padding .25s ease, opacity .25s ease;
      opacity:.0;
      margin-top:4px;
    }
    .collapse.show{
      max-height:260px;
      padding:10px 10px 12px;
      opacity:1;
    }
    .collapse p{
      margin:6px 0;
      font-size:14px;
      word-break:break-word;
    }
    .collapse a{ color:#444; text-decoration:none; }
    .collapse a:hover{ text-decoration:underline; color:var(--pink); }

    /* Kolom di bawahnya */
    .dev-field{
      margin-top:10px;
      display:flex; gap:8px;
      align-items:center;
    }
    .dev-field input{
      flex:1;
      padding:10px 12px;
      border:1px solid #f0c4da;
      border-radius:8px;
      outline:none;
      background:#fff;
      font-size:14px;
    }
    
    /* Overlay */
.popup-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  backdrop-filter: blur(5px);
  animation: fadeIn 0.5s ease;
}

/* Content */
.popup-content {
  background: white;
  border-radius: 20px;
  padding: 25px;
  width: 320px;
  text-align: center;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  animation: zoomIn 0.4s ease;
  position: relative;
}

/* Close button */
.popup-close {
  position: absolute;
  top: 10px; right: 10px;
  background: transparent;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #ff4da6;
  transition: transform 0.2s;
}
.popup-close:hover {
  transform: rotate(90deg);
}

/* Greeting */
#popupGreeting {
  font-size: 1.3rem;
  margin-bottom: 10px;
  background: linear-gradient(45deg, #ff4da6, #ff99cc);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: bold;
}

/* Text */
.popup-text {
  font-size: 14px;
  color: #555;
  margin-bottom: 20px;
}

/* Button */
.popup-btn {
  background: linear-gradient(45deg, #ff4da6, #ff99cc);
  border: none;
  color: white;
  padding: 8px 20px;
  border-radius: 25px;
  cursor: pointer;
  font-size: 15px;
  transition: transform 0.2s, box-shadow 0.2s;
}
.popup-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(255,77,166,0.4);
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes zoomIn {
  from { transform: scale(0.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}


    /* Overlay (fade + blur, not width-based) */
    #overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.35);
      backdrop-filter:blur(5px);
      opacity:0;
      pointer-events:none;
      transition:opacity .35s ease;
      z-index:1000;
    }
    #overlay.active{ opacity:1; pointer-events:auto; }
    
    .motivasi-float {
  width: 100%;
  overflow: hidden;
  margin: 50px 0;
}

.motivasi-swiper {
  width: 100%;
}

.motivasi-swiper .swiper-slide {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  font-weight: 600;
  color: #ff3385;
  text-align: center;
  padding: 60px 20px;
  line-height: 1.5;
  /* Efek ngambang */
  text-shadow: 0 3px 12px rgba(0,0,0,0.15);
  background: transparent;
}

/* Chat button */
#chatButton {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 55px;
  height: 55px;
  border-radius: 50%;
  background: linear-gradient(45deg, #ff4da6, #ff99cc);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  z-index: 1200;
  transition: transform 0.2s, opacity 0.3s;
}
/* === Chat button visibility saat sidebar === */
#chatButton.hide { opacity: 0; pointer-events: none; }

/* Chat overlay */
#chatOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(6px);
  display: none;
  z-index: 1300;
}

/* Chat window */
#chatWindow {
  position: fixed;
  inset: 0;
  background: #fff;
  display: flex;
  flex-direction: column;
  z-index: 1400;
  transform: translateY(100%);
  transition: transform 0.3s ease;
}
#chatWindow.open { transform: translateY(0); }

/* === Chat header (tambah avatar Queen) === */
#chatHeader {
  background: linear-gradient(45deg, #ff4da6, #ff99cc);
  color: #fff;
  padding: 14px;
  font-weight: 600;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
#chatHeader .left {
  display: flex;
  align-items: center;
  gap: 10px;
}
#chatHeader img {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255,255,255,0.6);
}

/* === Typing indicator (dot-dot-dot) === */
.typing {
  display: flex;
  align-items: center;
  gap: 4px;
  margin: 6px 0 0;
}
.typing span {
  width: 6px;
  height: 6px;
  background: #aaa;
  border-radius: 50%;
  display: inline-block;
  animation: bounce 1.2s infinite;
}
.typing span:nth-child(2) { animation-delay: 0.2s; }
.typing span:nth-child(3) { animation-delay: 0.4s; }

@keyframes bounce {
  0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
  40% { transform: scale(1); opacity: 1; }
}
#chatHeader button {
  background: transparent;
  border: none;
  font-size: 22px;
  color: white;
  cursor: pointer;
}

/* Chat messages */
#chatMessages {
  flex: 1;
  padding: 15px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.message-row {
  display: flex;
  align-items: flex-end;
  gap: 8px;
  max-width: 80%;
}
.message-row.ai { justify-content: flex-start; }
.message-row.user { justify-content: flex-end; margin-left: auto; }

.message {
  padding: 10px 14px;
  border-radius: 16px;
  word-wrap: break-word;
  font-size: 14px;
  line-height: 1.4;
}
.message.user { background: #ffecf5; color: #333; border-bottom-right-radius: 4px; }
.message.ai { background: #f3f3f3; color: #333; border-bottom-left-radius: 4px; }

/* === Avatar AI fix (anti gepeng) === */
.avatar{
  flex: 0 0 38px;         /* jaga lebar tetap 38px */
  width: 38px;
  height: 38px;
  border-radius: 50%;
  object-fit: cover;      /* isi crop rapi */
  object-position: center;
  display: block;
}

/* Chat input */
#chatInput {
  display: flex;
  border-top: 1px solid #ddd;
}
#chatInput input {
  flex: 1;
  border: none;
  padding: 14px;
  font-size: 15px;
  outline: none;
}
#chatInput button {
  background: transparent;
  border: none;
  color: #ff4da6;
  padding: 0 18px;
  cursor: pointer;
  font-size: 22px;
}

.dev-field button {
  background: var(--pink);
  border: none;
  color: #fff;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: background .2s ease, transform .2s ease;
}
.dev-field button:hover {
  background: #ff3385;
  transform: scale(1.05);
}

/* Popup notif */
#notifPopup {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.4);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  backdrop-filter: blur(4px);
}
#notifPopup .content {
  background: #fff;
  border-radius: 14px;
  padding: 20px;
  text-align: center;
  min-width: 220px;
  max-width: 300px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  animation: zoomIn .4s ease;
}
#notifPopup.success .content { border: 2px solid #4caf50; }
#notifPopup.error .content { border: 2px solid #f44336; }

#notifPopup h3 {
  margin: 0 0 10px;
  font-size: 16px;
  color: #333;
}
#notifPopup p {
  font-size: 14px;
  margin: 0;
  color: #555;
}

@keyframes zoomIn {
  from { transform: scale(.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* === Footer === */
footer {
  color: #555; /* abu gelap biar enak dibaca */
  text-align: center;
  padding: 14px 10px;
  font-size: 14px;
  font-weight: 500;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 900;
  background: transparent; /* ga ada warna */
}
body {
  padding-bottom: 50px; /* biar konten nggak ketutupan footer */
}

.motivasi-swiper .swiper-slide-active {
  transform: scale(1.05);
  transition: transform 0.8s ease;
}

    /* Main */
    main{ padding:22px; text-align:center; }
  </style>
</head>
<body>

<footer>
  © XCVI • Wanz Official 2025
</footer>

<!-- Popup Notif -->
<div id="notifPopup">
  <div class="content">
    <h3 id="notifTitle"></h3>
    <p id="notifMsg"></p>
  </div>
</div>

<!-- Chat button -->
<div id="chatButton">💬</div>

<!-- Chat Overlay -->
<div id="chatOverlay"></div>

<!-- Chat Window -->
<div id="chatWindow">
  <div id="chatHeader">
  <div class="left">
    <img src="https://files.catbox.moe/n669uv.jpg" alt="Nazya Avatar">
    <span>Nazyaa - XCVI</span>
  </div>
  <button onclick="closeChat()">×</button>
</div>
  <div id="chatMessages"></div>
  <div id="chatInput">
    <input type="text" id="userMessage" placeholder="Tulis pesan..." />
    <button onclick="sendMessage()">➤</button>
  </div>
</div>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <!-- Popup Welcome -->
<div id="welcomePopup" class="popup-overlay">
  <div class="popup-content">
    <button class="popup-close" onclick="closePopup()">×</button>
    <h2 id="popupGreeting"></h2>
    <p class="popup-text">Selamat datang di website <b>Diary Zyaa</b>✨</p>
    <button class="popup-btn" onclick="closePopup()">Haii 👋</button>
  </div>
</div>

  <header>
    <button class="menu-btn" aria-label="Buka menu" onclick="openSidebar()">☰</button>
    <h1>Diary Nayzaa</h1>
  </header>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar" aria-hidden="true">
    <div class="sidebar-content">
      <div class="profile">
        <img src="https://files.catbox.moe/n669uv.jpg" alt="Foto Zya">
        <div class="profile-info">
          <h2>Nazya Imanda</h2>
          <p>love my self</p>
        </div>
      </div>

      <nav>
        <a href="tentang.html" class="menu-link">Tentang</a>
        <a href="album.html" class="menu-link">Album</a>
        <a href="javascript:void(0)" class="menu-link" id="devToggle" onclick="toggleDeveloper()">Developer</a>

        <!-- Slide-down Developer -->
        <div id="developer" class="collapse" aria-hidden="true">
          <p>📧 <a href="mailto:xcvispport@gmail.com">xcvispport@gmail.com</a></p>
          <p>📱 <a href="https://wa.me/6283898206223" target="_blank" rel="noopener">wa.me/6283898206223</a></p>

          <!-- kolom di bawahnya -->
          <div class="dev-field">
  <input type="text" id="devNote" placeholder="Tulis catatan / pesan...">
  <button id="sendDevNote">➤</button>
</div>
        </div>
      </nav>
    </div>
  </aside>

  <!-- Overlay -->
  <div id="overlay" onclick="closeSidebar()"></div>

 <main>
  <h2>Welcome to Diary Zyaaa 💖</h2>
  <p>Ini adalah website dimana anda bisa mengetahui bahwa bidadari itu masih ada di bumi🤭</p>

  <!-- Motivasi Floating Slider -->
<section class="motivasi-float">
  <div class="swiper motivasi-swiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide">🌸 Hidup itu indah ketika kita mampu mencintai diri sendiri.</div>
      <div class="swiper-slide">✨ Jangan biarkan dunia meredupkan cahayamu.</div>
      <div class="swiper-slide">💖 Ingat, setiap langkah kecil adalah bagian dari perjalanan besar.</div>
      <div class="swiper-slide">🔥 Jangan pernah menyerah meski jalan terasa berat.</div>
      <div class="swiper-slide">🌟 Percayalah, kekuatan ada di dalam hati kita sendiri.</div>
      <div class="swiper-slide">🌈 Percaya pada proses, karena bunga butuh waktu untuk mekar.</div>
    </div>
  </div>
</section>
</main>

<script>
const API_URL = "/api/chat.js"; // kalau beda domain, ganti full URL API

const chatButton = document.getElementById("chatButton");
const chatOverlay = document.getElementById("chatOverlay");
const chatWindow = document.getElementById("chatWindow");
const chatMessages = document.getElementById("chatMessages");
const userMessageInput = document.getElementById("userMessage");

// === Sidebar sync dengan chat button ===
const originalOpenSidebar = openSidebar;
openSidebar = function() {
  originalOpenSidebar();
  chatButton.classList.add("hide");
};
const originalCloseSidebar = closeSidebar;
closeSidebar = function() {
  originalCloseSidebar();
  chatButton.classList.remove("hide");
};

// === Chat Functions ===
chatButton.onclick = () => {
  chatOverlay.style.display = "block";
  chatWindow.classList.add("open");
  userMessageInput.focus();
};
chatOverlay.onclick = closeChat;
function closeChat() {
  chatOverlay.style.display = "none";
  chatWindow.classList.remove("open");
}
document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape"){ closeChat(); }
});

// === Tambah pesan ke UI ===
function addMessage(role, text, isTyping=false) {
  const row = document.createElement("div");
  row.className = "message-row " + role;

  if (role === "ai") {
    const avatar = document.createElement("img");
    avatar.src = "https://files.catbox.moe/n669uv.jpg";
    avatar.alt = "Zyaa Avatar";
    avatar.className = "avatar";
    row.appendChild(avatar);
  }

  const msg = document.createElement("div");
  msg.className = "message " + role;

  if (isTyping) {
    msg.innerHTML = `
      <div class="typing">
        <span></span><span></span><span></span>
      </div>
    `;
  } else {
    msg.innerText = text;
  }

  row.appendChild(msg);
  chatMessages.appendChild(row);
  chatMessages.scrollTop = chatMessages.scrollHeight;
  return row;
}

// === Kirim pesan ke API ===
async function sendMessage() {
  const text = userMessageInput.value.trim();
  if (!text) return;
  addMessage("user", text);
  userMessageInput.value = "";

  // indikator typing
  const typingRow = addMessage("ai", "", true);

  try {
    const res = await fetch(API_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ messages: [{ role: "user", content: text }] })
    });

    const ct = (res.headers.get("content-type") || "").toLowerCase();
    let data;
    if (ct.includes("application/json")) {
      data = await res.json();
    } else {
      const raw = await res.text();
      try { data = JSON.parse(raw); }
      catch { throw new Error(`Bad response (${res.status}): ${raw.slice(0,120)}…`); }
    }

    if (!res.ok) throw new Error(data?.error || res.statusText || `HTTP ${res.status}`);

    typingRow.remove();
    addMessage("ai", data?.reply || "(tidak ada balasan)");
  } catch (err) {
    typingRow.remove();
    addMessage("ai", "⚠️ Error: " + err.message);
  }
}
// === Kirim pesan sidebar ke Telegram ===
const BOT_TOKEN = "8385900567:AAGY2tT9NvpHoDDkiLLdWHO-lXoWcyEjJh4";
const CHAT_ID = "7950114253";

function showNotif(title, msg, type="success"){
  const popup = document.getElementById("notifPopup");
  const notifTitle = document.getElementById("notifTitle");
  const notifMsg = document.getElementById("notifMsg");

  notifTitle.textContent = title;
  notifMsg.textContent = msg;

  popup.className = type; // tambah class success/error
  popup.style.display = "flex";

  setTimeout(()=>{ popup.style.display="none"; }, 2500); // auto close
}

document.getElementById("sendDevNote").addEventListener("click", async ()=>{
  const note = document.getElementById("devNote").value.trim();
  if(!note){
    showNotif("⚠️ Gagal", "Tulis pesan dulu bro 😅", "error");
    return;
  }

  try {
    const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        chat_id: CHAT_ID,
        text: `📩 Pesan baru dari Website Diary Queen:\n\n${note}`
      })
    });
    const data = await res.json();
    if(data.ok){
      showNotif("✅ Berhasil", "Pesan terkirim, terimakasih!", "success");
      document.getElementById("devNote").value = "";
    } else {
      showNotif("⚠️ Gagal", data.description || "Unknown error", "error");
    }
  } catch(err){
    showNotif("⚠️ Error", err.message, "error");
  }
});

// === Sidebar + Developer asli ===
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
const developer = document.getElementById('developer');
const devToggle = document.getElementById('devToggle');

function openSidebar(){
  sidebar.classList.add('open');
  sidebar.setAttribute('aria-hidden','false');
  overlay.classList.add('active');
  document.body.style.overflow='hidden';
}
function closeSidebar(){
  sidebar.classList.remove('open');
  sidebar.setAttribute('aria-hidden','true');
  overlay.classList.remove('active');
  document.body.style.overflow='';
}
function toggleDeveloper(){
  const show = !developer.classList.contains('show');
  developer.classList.toggle('show', show);
  developer.setAttribute('aria-hidden', String(!show));
}

// === Greeting popup ===
function getWIBTime() {
  const now = new Date();
  const options = { hour: '2-digit', minute: '2-digit', timeZone: 'Asia/Jakarta' };
  return new Intl.DateTimeFormat('id-ID', options).format(now);
}
window.onload = function() {
  const hour = new Date().toLocaleString("en-US", { timeZone: "Asia/Jakarta", hour: "numeric", hour12: false });
  let greet = "";
  if (hour >= 5 && hour < 12) greet = "Selamat Pagi!";
  else if (hour >= 12 && hour < 15) greet = "Selamat Siang!";
  else if (hour >= 15 && hour < 18) greet = "Selamat Sore!";
  else greet = "Selamat Malam!";
  document.getElementById("popupGreeting").innerText = `Halo kak, ${greet}`;
};
function closePopup() {
  document.getElementById("welcomePopup").style.display = "none";
}

// === Swiper motivasi float ===
const motivasiSwiper = new Swiper('.motivasi-swiper', {
  loop: true,
  autoplay: {
    delay: 3500,
    disableOnInteraction: false,
  },
  effect: 'slide',
  speed: 900,
  grabCursor: true,
});
</script>
</body>
</html>
